<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Inventory Tracking System</title>
    <style>
        /* ... (keep your existing CSS here, unchanged) ... */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }
        .tab {
            padding: 12px 24px;
            background: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
            border-radius: 8px 8px 0 0;
        }
        .tab.active {
            background: #667eea;
            color: white;
        }
        .tab:hover {
            background: #f0f0f0;
        }
        .tab.active:hover {
            background: #5a67d8;
        }
        .content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .form-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }
        .required {
            color: #e53e3e;
        }
        .help-text {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        select, input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        .submit-btn:active {
            transform: translateY(0);
        }
        .inventory-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .filters {
            padding: 20px;
            background: #f8f9fa;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        tr:hover {
            background: #f8f9fa;
        }
        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }
        .status-photos {
            background: #e6f3ff;
            color: #0066cc;
        }
        .status-needpost {
            background: #fff4e6;
            color: #cc6600;
        }
        .status-listed {
            background: #e6ffe6;
            color: #009900;
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.2s ease;
        }
        .metric-card:hover {
            transform: translateY(-5px);
        }
        .metric-value {
            font-size: 3em;
            font-weight: 700;
            color: #667eea;
            margin: 10px 0;
        }
        .metric-label {
            color: #666;
            font-size: 1.1em;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        .action-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .export-btn {
            background: #48bb78;
            color: white;
        }
        .export-btn:hover {
            background: #38a169;
        }
        .import-btn {
            background: #4299e1;
            color: white;
        }
        .import-btn:hover {
            background: #3182ce;
        }
        .clear-btn {
            background: #f56565;
            color: white;
        }
        .clear-btn:hover {
            background: #e53e3e;
        }
        .edit-btn {
            padding: 6px 12px;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .edit-btn:hover {
            background: #3182ce;
        }
        .shipping-alert {
            color: #e53e3e;
            font-weight: 600;
            font-size: 0.9em;
        }
        .instructions {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .instructions h3 {
            color: #2d3748;
            margin-bottom: 10px;
        }
        .instructions ul {
            margin-left: 20px;
            color: #4a5568;
        }
        .instructions li {
            margin-bottom: 8px;
        }
        .success-message {
            background: #c6f6d5;
            border: 2px solid #9ae6b4;
            color: #22543d;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            display: none;
        }
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            h1 {
                font-size: 2em;
            }
            .tabs {
                flex-wrap: wrap;
            }
            .tab {
                flex: 1;
                min-width: 100px;
            }
            .filters {
                flex-direction: column;
                align-items: stretch;
            }
            .action-buttons {
                flex-direction: column;
            }
            table {
                font-size: 14px;
            }
            th, td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üì¶ Card Inventory Tracking System</h1>
        <p class="subtitle">Professional Trading Card Management</p>
    </header>
    <div class="container">
        <div class="tabs">
            <button class="tab active" onclick="showTab('intake', event)">üìù Card Intake</button>
            <button class="tab" onclick="showTab('inventory', event)">üìã Inventory List</button>
            <button class="tab" onclick="showTab('dashboard', event)">üìä Dashboard</button>
            <button class="tab" onclick="showTab('instructions', event)">üìñ Instructions</button>
        </div>
        <div id="intake" class="content active">
            <div class="form-container">
                <div class="success-message" id="successMessage">
                    ‚úÖ Cards logged successfully! Form cleared for next entry.
                </div>
                <form id="intakeForm">
                    <div class="form-group">
                        <label for="sport">Sport <span class="required">*</span></label>
                        <select id="sport" required>
                            <option value="">Select Sport</option>
                            <option value="Baseball">Baseball</option>
                            <option value="Basketball">Basketball</option>
                            <option value="Football">Football</option>
                            <option value="Hockey">Hockey</option>
                            <option value="Soccer">Soccer</option>
                            <option value="Other Sports">Other Sports</option>
                            <option value="Non-Sports">Non-Sports</option>
                            <option value="MIXED BULK">MIXED BULK (for unsorted batches only)</option>
                        </select>
                        <p class="help-text">Select the primary sport. Already sorted by sport, right?</p>
                    </div>
                    <div class="form-group">
                        <label for="condition">Card Condition <span class="required">*</span></label>
                        <select id="condition" required>
                            <option value="">Select Condition</option>
                            <option value="Raw (ungraded)">Raw (ungraded)</option>
                            <option value="Graded (in slab)">Graded (in slab)</option>
                            <option value="Mix of both">Mix of both</option>
                        </select>
                        <p class="help-text">Graded = in a PSA, BGS, SGC, etc. slab</p>
                    </div>
                    <div class="form-group">
                        <label for="quantityType">Quantity Type <span class="required">*</span></label>
                        <select id="quantityType" required>
                            <option value="">Select Type</option>
                            <option value="Single card">Single card</option>
                            <option value="Lot of 2-4 cards">Lot of 2-4 cards</option>
                            <option value="Lot of 5+ cards">Lot of 5+ cards</option>
                            <option value="BULK LOT - NEEDS SORT">BULK LOT - NEEDS SORT</option>
                        </select>
                        <p class="help-text">Just count cards, not value</p>
                    </div>
                    <div class="form-group">
                        <label for="quantity">Quantity <span class="required">*</span></label>
                        <input type="number" id="quantity" min="1" required>
                        <p class="help-text">How many items total? (1 lot = 1 item even if 50 cards inside)</p>
                    </div>
                    <div class="form-group">
                        <label for="description">Brief Description <span class="required">*</span></label>
                        <textarea id="description" required></textarea>
                        <p class="help-text">Quick identifier: "2023 Topps lot", "Jordan cards", "Mixed rookies", etc.</p>
                    </div>
                    <div class="form-group">
                        <label for="status">Initial Status <span class="required">*</span></label>
                        <select id="status" required>
                            <option value="">Select Status</option>
                            <option value="üì∏ Photos Taken">üì∏ Photos Taken</option>
                            <option value="üìù Need to Post">üìù Need to Post</option>
                            <option value="‚úÖ Listed on eBay">‚úÖ Listed on eBay</option>
                        </select>
                        <p class="help-text">What stage are these cards at?</p>
                    </div>
                    <div class="form-group">
                        <label for="notes">Additional Notes</label>
                        <textarea id="notes"></textarea>
                        <p class="help-text">Storage location, special handling, damaged cards, etc.</p>
                    </div>
                    <div class="form-group">
                        <label for="submittedBy">Submitted By <span class="required">*</span></label>
                        <select id="submittedBy" required>
                            <option value="">Select Partner</option>
                            <option value="Partner A (Shipping/Listing)">Partner A (Shipping/Listing)</option>
                            <option value="Partner B (Inventory Provider)">Partner B (Inventory Provider)</option>
                        </select>
                        <p class="help-text">Who's dropping these cards?</p>
                    </div>
                    <button type="submit" class="submit-btn">Submit Card Batch</button>
                </form>
            </div>
        </div>
        <div id="inventory" class="content">
            <div class="inventory-table">
                <div class="filters">
                    <div class="filter-group">
                        <label for="statusFilter">Filter by Status:</label>
                        <select id="statusFilter" onchange="filterInventory()">
                            <option value="">All Status</option>
                            <option value="üì∏ Photos Taken">üì∏ Photos Taken</option>
                            <option value="üìù Need to Post">üìù Need to Post</option>
                            <option value="‚úÖ Listed on eBay">‚úÖ Listed on eBay</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="sportFilter">Filter by Sport:</label>
                        <select id="sportFilter" onchange="filterInventory()">
                            <option value="">All Sports</option>
                            <option value="Baseball">Baseball</option>
                            <option value="Basketball">Basketball</option>
                            <option value="Football">Football</option>
                            <option value="Hockey">Hockey</option>
                            <option value="Soccer">Soccer</option>
                            <option value="Other Sports">Other Sports</option>
                            <option value="Non-Sports">Non-Sports</option>
                            <option value="MIXED BULK">MIXED BULK</option>
                        </select>
                    </div>
                </div>
                <div style="overflow-x: auto;">
                    <table id="inventoryTable">
                        <thead>
                            <tr>
                                <th>Timestamp</th>
                                <th>Sport</th>
                                <th>Condition</th>
                                <th>Type</th>
                                <th>Qty</th>
                                <th>Description</th>
                                <th>Status</th>
                                <th>Notes</th>
                                <th>Submitted By</th>
                                <th>eBay Item #</th>
                                <th>List Price</th>
                                <th>Shipping</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryBody">
                            <!-- Inventory items will be populated here -->
                        </tbody>
                    </table>
                </div>
                <div class="action-buttons">
                    <button class="action-btn export-btn" onclick="exportToCSV()">üì• Export to CSV</button>
                    <button class="action-btn import-btn" onclick="document.getElementById('importFile').click()">üì§ Import CSV</button>
                    <input type="file" id="importFile" style="display: none;" accept=".csv" onchange="importCSV(event)">
                    <button class="action-btn clear-btn" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>
                </div>
            </div>
        </div>
        <div id="dashboard" class="content">
            <div class="dashboard">
                <div class="metric-card">
                    <div class="metric-label">Total Items</div>
                    <div class="metric-value" id="totalItems">0</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Photos Taken</div>
                    <div class="metric-value" id="photosTaken">0</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Need to Post</div>
                    <div class="metric-value" id="needToPost">0</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Listed on eBay</div>
                    <div class="metric-value" id="listedOnEbay">0</div>
                </div>
            </div>
            <div class="inventory-table">
                <h3 style="padding: 20px; background: #f8f9fa; margin: 0;">Recent Activity (Last 10 Entries)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Sport</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Submitted By</th>
                        </tr>
                    </thead>
                    <tbody id="recentActivity">
                        <!-- Recent items will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
        <div id="instructions" class="content">
            <div class="instructions">
                <h3>üöÄ Quick Start Guide</h3>
                <ul>
                    <li><strong>Step 1:</strong> Sort cards by sport BEFORE using this system</li>
                    <li><strong>Step 2:</strong> Separate graded cards from raw cards</li>
                    <li><strong>Step 3:</strong> Group obvious lots (5+ of same player/team)</li>
                    <li><strong>Step 4:</strong> Fill out the intake form for each group</li>
                    <li><strong>Step 5:</strong> Apply matching physical sticker (red/yellow/green)</li>
                </ul>
            </div>
            <div class="instructions">
                <h3>üì¶ Shipping Rules (Applied at Listing)</h3>
                <ul>
                    <li><strong>Under $20 single raw card:</strong> eBay Standard Envelope ($0.69 cost, charge $1.25-1.99)</li>
                    <li><strong>Any graded card:</strong> USPS Ground minimum ($4.99)</li>
                    <li><strong>Lot of 5+ cards:</strong> USPS Ground minimum ($4.99)</li>
                    <li><strong>$20-99:</strong> USPS Ground ($4.99)</li>
                    <li><strong>$100+:</strong> Premium shipping options available</li>
                </ul>
            </div>
            <div class="instructions">
                <h3>üì∏üìù‚úÖ Status Guide</h3>
                <ul>
                    <li><strong>üì∏ Photos Taken:</strong> Cards have been photographed and are ready for listing</li>
                    <li><strong>üìù Need to Post:</strong> Photos done, need to create eBay listing</li>
                    <li><strong>‚úÖ Listed on eBay:</strong> Live on eBay with item number</li>
                </ul>
            </div>
            <div class="instructions">
                <h3>üíæ Data Management</h3>
                <ul>
                    <li><strong>Auto-Save:</strong> All entries are saved to your browser automatically</li>
                    <li><strong>Export:</strong> Download your inventory as CSV for backup or Excel use</li>
                    <li><strong>Import:</strong> Upload a CSV to restore or bulk add items</li>
                    <li><strong>Clear:</strong> Remove all data (cannot be undone!)</li>
                </ul>
            </div>
        </div>
    </div>
    <script>
        let inventory = JSON.parse(localStorage.getItem('cardInventory')) || [];
        function showTab(tabName, event) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.content');
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            } else {
                let tabBtn = null;
                if (tabName === 'intake') tabBtn = document.querySelector('.tab:nth-child(1)');
                if (tabName === 'inventory') tabBtn = document.querySelector('.tab:nth-child(2)');
                if (tabName === 'dashboard') tabBtn = document.querySelector('.tab:nth-child(3)');
                if (tabName === 'instructions') tabBtn = document.querySelector('.tab:nth-child(4)');
                if (tabBtn) tabBtn.classList.add('active');
            }
            document.getElementById(tabName).classList.add('active');
            if (tabName === 'inventory') {
                renderInventory();
            } else if (tabName === 'dashboard') {
                updateDashboard();
            }
        }
        function updateDashboard() {
            document.getElementById('totalItems').textContent = inventory.length;
            document.getElementById('photosTaken').textContent = inventory.filter(item => item.status === 'üì∏ Photos Taken').length;
            document.getElementById('needToPost').textContent = inventory.filter(item => item.status === 'üìù Need to Post').length;
            document.getElementById('listedOnEbay').textContent = inventory.filter(item => item.status === '‚úÖ Listed on eBay').length;
            const recentBody = document.getElementById('recentActivity');
            recentBody.innerHTML = '';
            const recent = inventory.slice(-10).reverse();
            recent.forEach(item => {
                const row = recentBody.insertRow();
                row.innerHTML = `
                    <td>${item.timestamp}</td>
                    <td>${item.sport}</td>
                    <td>${item.description}</td>
                    <td><span class="status-badge ${getStatusClass(item.status)}">${item.status}</span></td>
                    <td>${item.submittedBy}</td>
                `;
            });
        }
        document.getElementById('intakeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = {
                timestamp: new Date().toLocaleString(),
                sport: document.getElementById('sport').value,
                condition: document.getElementById('condition').value,
                quantityType: document.getElementById('quantityType').value,
                quantity: document.getElementById('quantity').value,
                description: document.getElementById('description').value,
                status: document.getElementById('status').value,
                notes: document.getElementById('notes').value,
                submittedBy: document.getElementById('submittedBy').value,
                ebayItemNumber: '',
                listPrice: '',
                shippingMethod: '',
                uniqueId: generateUniqueId()
            };
            inventory.push(formData);
            localStorage.setItem('cardInventory', JSON.stringify(inventory));
            document.getElementById('successMessage').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 2000);
            this.reset();
            showTab('inventory');
        });
        function generateUniqueId() {
            const date = new Date();
            const dateStr = date.getFullYear().toString().substr(-2) +
                          ('0' + (date.getMonth() + 1)).slice(-2) +
                          ('0' + date.getDate()).slice(-2);
            const sport = document.getElementById('sport').value.substr(0, 3).toUpperCase();
            const random = Math.floor(Math.random() * 1000);
            return `${dateStr}-${sport}-${random}`;
        }
        function renderInventory() {
            const tbody = document.getElementById('inventoryBody');
            const filteredInventory = filterInventoryData();
            tbody.innerHTML = '';
            filteredInventory.forEach((item, index) => {
                const row = tbody.insertRow();
                let shippingAlert = '';
                if (item.condition === 'Graded (in slab)' && item.shippingMethod === 'eBay Standard Envelope') {
                    shippingAlert = '‚ö†Ô∏è CAN\'T USE ENVELOPE';
                } else if (item.quantityType === 'Lot of 5+ cards' && item.shippingMethod !== 'USPS Ground') {
                    shippingAlert = '‚ö†Ô∏è MUST USE GROUND';
                }
                row.innerHTML = `
                    <td>${item.timestamp}</td>
                    <td>${item.sport}</td>
                    <td>${item.condition}</td>
                    <td>${item.quantityType}</td>
                    <td>${item.quantity}</td>
                    <td>${item.description}</td>
                    <td><span class="status-badge ${getStatusClass(item.status)}">${item.status}</span></td>
                    <td>${item.notes}</td>
                    <td>${item.submittedBy}</td>
                    <td>${item.ebayItemNumber || '-'}</td>
                    <td>${item.listPrice || '-'}</td>
                    <td>
                        ${item.shippingMethod || '-'}
                        ${shippingAlert ? `<div class="shipping-alert">${shippingAlert}</div>` : ''}
                    </td>
                    <td><button class="edit-btn" onclick="editItem(${inventory.indexOf(item)})">Edit</button></td>
                `;
            });
        }
        function filterInventoryData() {
            const statusFilter = document.getElementById('statusFilter').value;
            const sportFilter = document.getElementById('sportFilter').value;
            return inventory.filter(item => {
                const statusMatch = !statusFilter || item.status === statusFilter;
                const sportMatch = !sportFilter || item.sport === sportFilter;
                return statusMatch && sportMatch;
            });
        }
        function filterInventory() {
            renderInventory();
        }
        function getStatusClass(status) {
            if (status.includes('üì∏')) return 'status-photos';
            if (status.includes('üìù')) return 'status-needpost';
            if (status.includes('‚úÖ')) return 'status-listed';
            return '';
        }
        function editItem(index) {
            const item = inventory[index];
            const editForm = `
                <div style="padding: 20px;">
                    <h3>Edit Item</h3>
                    <label>eBay Item #:</label>
                    <input type="text" id="edit-ebay" value="${item.ebayItemNumber || ''}" style="margin-bottom: 10px;">
                    <label>List Price:</label>
                    <input type="text" id="edit-price" value="${item.listPrice || ''}" style="margin-bottom: 10px;">
                    <label>Shipping Method:</label>
                    <select id="edit-shipping" style="margin-bottom: 10px;">
                        <option value="">Select Shipping</option>
                        <option value="eBay Standard Envelope" ${item.shippingMethod === 'eBay Standard Envelope' ? 'selected' : ''}>eBay Standard Envelope</option>
                        <option value="USPS Ground" ${item.shippingMethod === 'USPS Ground' ? 'selected' : ''}>USPS Ground</option>
                        <option value="UPS Ground" ${item.shippingMethod === 'UPS Ground' ? 'selected' : ''}>UPS Ground</option>
                        <option value="FedEx Ground" ${item.shippingMethod === 'FedEx Ground' ? 'selected' : ''}>FedEx Ground</option>
                    </select>
                    <label>Status:</label>
                    <select id="edit-status" style="margin-bottom: 20px;">
                        <option value="üì∏ Photos Taken" ${item.status === 'üì∏ Photos Taken' ? 'selected' : ''}>üì∏ Photos Taken</option>
                        <option value="üìù Need to Post" ${item.status === 'üìù Need to Post' ? 'selected' : ''}>üìù Need to Post</option>
                        <option value="‚úÖ Listed on eBay" ${item.status === '‚úÖ Listed on eBay' ? 'selected' : ''}>‚úÖ Listed on eBay</option>
                    </select>
                    <button onclick="saveEdit(${index})" class="submit-btn">Save Changes</button>
                </div>
            `;
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 1000; min-width: 400px;';
            modal.innerHTML = editForm;
            const overlay = document.createElement('div');
            overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999;';
            overlay.onclick = () => {
                document.body.removeChild(modal);
                document.body.removeChild(overlay);
            };
            document.body.appendChild(overlay);
            document.body.appendChild(modal);
        }
        function saveEdit(index) {
            inventory[index].ebayItemNumber = document.getElementById('edit-ebay').value;
            inventory[index].listPrice = document.getElementById('edit-price').value;
            inventory[index].shippingMethod = document.getElementById('edit-shipping').value;
            inventory[index].status = document.getElementById('edit-status').value;
            localStorage.setItem('cardInventory', JSON.stringify(inventory));
            renderInventory();
            const modals = document.querySelectorAll('div[style*="position: fixed"]');
            modals.forEach(modal => modal.remove());
        }
        function exportToCSV() {
            const headers = ['Timestamp', 'Sport', 'Condition', 'Quantity Type', 'Quantity', 'Description', 'Status', 'Notes', 'Submitted By', 'eBay Item #', 'List Price', 'Shipping Method', 'Unique ID'];
            const csvData = [headers];
            inventory.forEach(item => {
                csvData.push([
                    item.timestamp,
                    item.sport,
                    item.condition,
                    item.quantityType,
                    item.quantity,
                    item.description,
                    item.status,
                    item.notes,
                    item.submittedBy,
                    item.ebayItemNumber,
                    item.listPrice,
                    item.shippingMethod,
                    item.uniqueId
                ]);
            });
            const csv = csvData.map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `card_inventory_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
        function importCSV(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                const text = e.target.result;
                const lines = text.split('\n');
                const headers = lines[0].split(',').map(h => h.replace(/"/g, ''));
                for (let i = 1; i < lines.length; i++) {
                    if (lines[i].trim()) {
                        const values = lines[i].split(',').map(v => v.replace(/"/g, ''));
                        const item = {
                            timestamp: values[0] || new Date().toLocaleString(),
                            sport: values[1] || '',
                            condition: values[2] || '',
                            quantityType: values[3] || '',
                            quantity: values[4] || '',
                            description: values[5] || '',
                            status: values[6] || '',
                            notes: values[7] || '',
                            submittedBy: values[8] || '',
                            ebayItemNumber: values[9] || '',
                            listPrice: values[10] || '',
                            shippingMethod: values[11] || '',
                            uniqueId: values[12] || generateUniqueId()
                        };
                        inventory.push(item);
                    }
                }
                localStorage.setItem('cardInventory', JSON.stringify(inventory));
                renderInventory();
                updateDashboard();
                alert('Import successful!');
            };
            reader.readAsText(file);
        }
        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone!')) {
                inventory = [];
                localStorage.removeItem('cardInventory');
                renderInventory();
                updateDashboard();
                alert('All data has been cleared.');
            }
        }
        window.addEventListener('load', function() {
    updateDashboard();
    renderInventory();
    document.getElementById('intakeForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = {
            timestamp: new Date().toLocaleString(),
            sport: document.getElementById('sport').value,
            condition: document.getElementById('condition').value,
            quantityType: document.getElementById('quantityType').value,
            quantity: document.getElementById('quantity').value,
            description: document.getElementById('description').value,
            status: document.getElementById('status').value,
            notes: document.getElementById('notes').value,
            submittedBy: document.getElementById('submittedBy').value,
            ebayItemNumber: '',
            listPrice: '',
            shippingMethod: '',
            uniqueId: generateUniqueId()
        };
        inventory.push(formData);
        localStorage.setItem('cardInventory', JSON.stringify(inventory));
        document.getElementById('successMessage').style.display = 'block';
        setTimeout(() => {
            document.getElementById('successMessage').style.display = 'none';
        }, 2000);
        this.reset();
        showTab('inventory');
    });
});
    </script>
</body>
</html>